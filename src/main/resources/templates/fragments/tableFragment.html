<div th:fragment="tableFragment" id="tableFragment">
    <table class="table table-secondary table-hover table-striped">
        <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">Name</th>
            <th scope="col">Description</th>
            <th scope="col"><a class="btn btn-primary btn-sm" th:href="@{/item/create}" role="button">Create</a></th>
            <th></th>
        </tr>
        </thead>
        <tbody class="table-group-divider">
        <th:block th:each="itemDTO : ${itemPage.content}">
            <tr data-bs-toggle="collapse" th:attr="data-bs-target=${'#containers-' + itemDTO.item.id}, aria-expanded=${false}, aria-controls=${'containers-' + itemDTO.item.id}">
                <th scope="row" th:text="${itemDTO.item.id}"></th>
                <td th:text="${itemDTO.item.name}"></td>
                <td th:text="${itemDTO.item.description}"></td>
                <td>
                    <form th:action="@{${'/item/edit/' + itemDTO.item.id}}" method="get">
                        <button type="submit" class="btn btn-info btn-small">Edit</button>
                    </form>
                </td>
                <td><button type="button" id="deleteButton" th:href="@{'/item/delete/' + ${itemDTO.item.id}}" class="btn btn-danger btn-small" data-bs-toggle="modal" data-bs-target="#itemConfirmationModal">Delete</button></td>
            </tr>

            <tr scope="row" th:unless="${itemDTO.containers.isEmpty()}">
                <td colspan="5" th:id="'containers-' + ${itemDTO.item.id}" class="collapse">
                    <table class="table table-info table-hover table-striped">
                        <thead>
                        <tr>
                            <th scope="col">id</th>
                            <th scope="col">Name</th>
                            <th scope="col">Description</th>
                            <th scope="col">Scanner ID</th>
                        </tr>
                        </thead>
                        <tbody>
                        <th:block th:each="container : ${itemDTO.containers}">
                            <tr>
                                <th scope="row" th:text="${container.id}"></th>
                                <td th:text="${container.name}"></td>
                                <td th:text="${container.description}"></td>
                                <td th:text="${container.scannerId}"></td>
                            </tr>
                        </th:block>
                        </tbody>
                    </table>
                </td>
            </tr>
        </th:block>
        </tbody>
    </table>

    <div th:if="${itemPage.totalPages > 0}">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" th:href="${itemPage.hasPrevious()} ? @{/item(page=${itemPage.previousPageable().pageNumber}, search=${search})} : ''" th:classappend="${!itemPage.hasPrevious()} ? 'disabled' : ''">Previous</a>
            </li>
            <li th:each="pageNumber : ${#numbers.sequence(0, itemPage.totalPages - 1)}" class="page-item">
                <a class="page-link" th:href="@{/item(page=${pageNumber}, search=${search})}" th:text="${pageNumber + 1}"></a>
            </li>
            <li class="page-item">
                <a class="page-link" th:href="${itemPage.hasNext()} ? @{/item(page=${itemPage.nextPageable().pageNumber}, search=${search})} : ''" th:classappend="${!itemPage.hasNext()} ? 'disabled' : ''">Next</a>
            </li>
        </ul>
    </div>
</div>