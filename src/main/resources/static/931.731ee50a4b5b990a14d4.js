"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[931],{6931:(e,n,t)=>{t.r(n),t.d(n,{default:()=>u});var r=t(6540),l=t(9785),a=t(9668),o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},o.apply(this,arguments)},c=function(e){var n=e.fieldName,t=e.control,a=e.initialValue,c=e.toggleDropdown,i=e.checkIfContainerExists,s=e.setError,u=e.clearErrors,d=(0,l.as)({name:n,control:t,defaultValue:a||""}),m=d.field,f=d.fieldState.error,p=(0,r.useState)(String(m.value)||""),v=p[0],E=p[1];return r.createElement(r.Fragment,null,r.createElement("input",o({},m,{className:"form-control",onChange:function(e){E(e.target.value.trim()),m.onChange&&m.onChange(e)},onFocus:function(){return c()},onBlur:function(){m.onBlur(),i(v)?u(m.name):s(m.name,{message:"Container ID does not exist"})},value:v,disabled:""!==a})),f&&r.createElement("div",{className:"flex-nowrap"},r.createElement("li",{className:"list-group-item text-danger"},"".concat(f.message))))};const i=function(e){var n=e.containerDTOs,t=e.index,l=e.link,a=e.control,o=e.setValue,i=(e.setFocus,e.setError),s=e.clearErrors,u=e.watchLinks,d=((0,r.useRef)(null),function(){console.log("focus")});return r.createElement(r.Fragment,null,r.createElement("div",{className:"input-group"},r.createElement(c,{fieldName:"links.".concat(t,".scannerId"),control:a,initialValue:l.scannerId,toggleDropdown:d,checkIfContainerExists:function(e){return console.log("I got here!"),d(),console.log(u[t]),e.length>0&&Boolean(null==n?void 0:n.some((function(n){return n.scannerId===e})))},setError:i,clearErrors:s}),r.createElement("ul",{className:"dropdown-menu dropdown-menu-end w-100",style:{maxHeight:"200px",overflowY:"auto"}},n&&n.map((function(e){return r.createElement("li",{key:"container-dropdown-".concat(e.scannerId)},r.createElement("a",{className:"dropdown-item",onClick:function(){return n=e.scannerId,void o("links.".concat(t,".scannerId"),n);var n}},e.scannerId+" ("+e.name+")"))})))))};var s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},s.apply(this,arguments)};const u=function(e){var n,t,o=e.itemDTO,c=e.containerDTOs,u=e.setupDelete,d=e.handleDelete,m=e.cancelEdit,f=(0,l.xW)(),p=f.register,v=f.formState,E=v.errors,h=v.isSubmitting,b=f.control,g=f.setFocus,k=f.reset,y=f.trigger,I=f.setError,w=f.setValue,N=f.clearErrors,x=(0,l.jz)({control:b,name:"links"}),C=x.fields,D=x.append,O=x.remove,F=(0,l.FH)({control:b,name:"links"});(0,r.useEffect)((function(){var e,n,t;(null===(e=null==F?void 0:F[F.length-1])||void 0===e?void 0:e.scannerId)&&(D({scannerId:"",quantity:1}),setTimeout((function(){y("links"),g("links.".concat(F.length-1,".scannerId"))}),0)),(null==F?void 0:F.length)>1&&!(null===(n=null==F?void 0:F[F.length-2])||void 0===n?void 0:n.scannerId)&&!(null===(t=null==F?void 0:F[F.length-1])||void 0===t?void 0:t.scannerId)&&O(F.length-1)}),[F]),(0,r.useEffect)((function(){k(o),D({scannerId:"",quantity:1}),y("links")}),[o,k]);var S=function(e,n){return t=void 0,r=void 0,a=function(){return function(e,n){var t,r,l,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(l=2&c[0]?r.return:c[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,c[1])).done)return l;switch(r=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((l=(l=a.trys).length>0&&l[l.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){a.label=c[1];break}if(6===c[0]&&a.label<l[1]){a.label=l[1],l=c;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(c);break}l[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(t){switch(t.label){case 0:return void 0===n?(F.length>1&&O(e),[2]):[4,d(e,n)];case 1:return t.sent()&&O(e),[2]}}))},new((l=void 0)||(l=Promise))((function(e,n){function o(e){try{i(a.next(e))}catch(e){n(e)}}function c(e){try{i(a.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof l?t:new l((function(e){e(t)}))).then(o,c)}i((a=a.apply(t,r||[])).next())}));var t,r,l,a};return r.createElement(r.Fragment,null,r.createElement("tr",{key:"item-edit-".concat(null==o?void 0:o.item.id),className:"table-primary w-100"},r.createElement("td",null,r.createElement("input",s({},p("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(n=E.item)||void 0===n?void 0:n.name)&&r.createElement("p",null,"".concat(E.item.name.message))),r.createElement("td",null,r.createElement("textarea",s({},p("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(t=E.item)||void 0===t?void 0:t.description)&&r.createElement("p",null,"".concat(E.item.description.message))),r.createElement("td",null,r.createElement(a.A,{control:b,name:"item.tags"})),r.createElement("td",null,r.createElement("div",{className:"btn-group"},r.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:h||Object.keys(E).length>0}," Save "),r.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return m(-1)}},"Discard")))),r.createElement("tr",{className:"table-primary"},r.createElement("td",{colSpan:6},r.createElement("table",{id:"linkTable",className:"table table-info table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Container ID"),r.createElement("th",{scope:"col"},"Quantity"),r.createElement("th",{scope:"col"},"Remove"))),r.createElement("tbody",{id:"linkTableBody",className:"link"},C.map((function(e,n){var t;return r.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},r.createElement("td",null,c&&r.createElement(i,{key:"link-combobox-".concat(e.id),containerDTOs:c,control:b,setError:I,clearErrors:N,index:n,link:e,setValue:w,setFocus:g,watchLinks:F})),r.createElement("td",null,r.createElement("input",s({},p("links.".concat(n,".quantity"),{valueAsNumber:!0}),{className:"form-control",min:-1/0,onBlur:function(){F[n].scannerId&&void 0===e.linkId&&function(e,n){var t=F,r=t.find((function(n){var t;return(null==n?void 0:n.linkId)&&(null===(t=null==n?void 0:n.scannerId)||void 0===t?void 0:t.trim())===e.trim()}));if(r){var l=t.findIndex((function(e){return e===r})),a=r.quantity,o=(a||1)+F[n].quantity;o<1?u((function(){return S(n,r.linkId?r.linkId:void 0)}),"If you do this, the item quantity in Container: ".concat(r.scannerId," will be less than one. Do you want to delete this link or cancel the operation?")):(w("links.".concat(l,".quantity"),o),console.log(a)),O(n)}}(F[n].scannerId,n)}}))),r.createElement("td",null,r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return S(n,e.linkId?e.linkId:void 0)}})),E.links&&E.links[n]&&r.createElement("p",null,null===(t=E.links[n])||void 0===t?void 0:t.message))})))))))}}}]);