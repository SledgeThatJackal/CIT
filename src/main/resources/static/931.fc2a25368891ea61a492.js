"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[931],{6931:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var r=t(6540),l=t(9785),a=t(9668),o=t(3122),c=t(6126),i=t(3524),s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},s.apply(this,arguments)},u=function(e){var n=e.fieldName,t=e.control,a=e.initialValue,o=e.hasLinkId,c=e.checkIfContainerExists,i=e.setError,u=e.clearErrors,d=e.showError,m=(0,l.as)({name:n,control:t,defaultValue:a||""}),f=m.field;return m.fieldState.error,r.createElement(r.Fragment,null,r.createElement("input",s({},f,{className:"form-control",onChange:function(e){f.onChange&&f.onChange(e)},onBlur:function(){f.onBlur(),c(f.value)?u(f.name):(i(f.name,{message:"Container ID does not exist"}),d())},value:f.value,disabled:o})))};const d=function(e){var n,t,l=e.containerDTOs,a=e.index,d=e.link,m=e.control,f=e.errors,p=e.setValue,v=e.setError,h=e.clearErrors,E=(e.watchLinks,(0,r.useState)(!1)),b=E[0],k=E[1],y=(0,r.useState)(!1),g=y[0],I=y[1],w=(0,r.useRef)(null),N=function(e){p("links.".concat(a,".scannerId"),e)};return r.createElement("div",{className:"input-group",ref:w},r.createElement(u,{fieldName:"links.".concat(a,".scannerId"),control:m,initialValue:d.scannerId,hasLinkId:void 0!==d.linkId,checkIfContainerExists:function(e){return e.length>=0&&Boolean(null==l?void 0:l.some((function(n){return n.scannerId===e})))},setError:v,clearErrors:h,showError:function(){return I(!g)}}),r.createElement(o.A,{show:b,onToggle:function(e){return k(e)}},r.createElement(o.A.Toggle,null),r.createElement(o.A.Menu,{style:{maxHeight:"200px",overflowY:"auto"}},l&&l.map((function(e,n){return r.createElement(o.A.Item,{key:"DropDownMenu-".concat(n),onClick:function(){return N(e.scannerId)}}," ",e.scannerId+" ("+e.name+")"," ")})))),(null===(t=null===(n=f.links)||void 0===n?void 0:n[a])||void 0===t?void 0:t.scannerId)&&r.createElement(c.A,{target:w.current,show:g,placement:"right"},(function(e){return r.createElement(i.A,s({id:"overlay-error"},e),"".concat(f.links[a].scannerId.message))})))};var m=t(7452),f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e},f.apply(this,arguments)};const p=function(e){var n,t,o=e.itemDTO,c=e.containerDTOs,i=e.setupDelete,s=e.handleDelete,u=e.cancelEdit,p=(0,l.xW)(),v=p.register,h=p.formState,E=h.errors,b=h.isSubmitting,k=p.control,y=p.setFocus,g=p.reset,I=p.trigger,w=p.setError,N=p.setValue,x=p.clearErrors,C=(0,r.useState)(!1),D=C[0],O=C[1],A=(0,r.useState)(""),S=A[0],T=A[1],j=function(){return O(!D)},q=(0,l.jz)({control:k,name:"links"}),B=q.fields,F=q.append,V=q.remove,L=(0,l.FH)({control:k,name:"links"});(0,r.useEffect)((function(){var e,n,t;(null===(e=null==L?void 0:L[L.length-1])||void 0===e?void 0:e.scannerId)&&(F({scannerId:"",quantity:1}),setTimeout((function(){I("links"),y("links.".concat(L.length-1,".scannerId"))}),0)),(null==L?void 0:L.length)>1&&!(null===(n=null==L?void 0:L[L.length-2])||void 0===n?void 0:n.scannerId)&&!(null===(t=null==L?void 0:L[L.length-1])||void 0===t?void 0:t.scannerId)&&V(L.length-1)}),[L]),(0,r.useEffect)((function(){g(o),F({scannerId:"",quantity:1}),I("links")}),[o,g]);var H=function(e,n){return t=void 0,r=void 0,a=function(){return function(e,n){var t,r,l,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(l=2&c[0]?r.return:c[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,c[1])).done)return l;switch(r=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((l=(l=a.trys).length>0&&l[l.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){a.label=c[1];break}if(6===c[0]&&a.label<l[1]){a.label=l[1],l=c;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(c);break}l[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],r=0}finally{t=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(t){switch(t.label){case 0:return void 0===n?(L.length>1&&V(e),[2]):[4,s(e,n)];case 1:return t.sent()&&V(e),[2]}}))},new((l=void 0)||(l=Promise))((function(e,n){function o(e){try{i(a.next(e))}catch(e){n(e)}}function c(e){try{i(a.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof l?t:new l((function(e){e(t)}))).then(o,c)}i((a=a.apply(t,r||[])).next())}));var t,r,l,a};return r.createElement(r.Fragment,null,r.createElement("tr",{key:"item-edit-".concat(null==o?void 0:o.item.id),className:"table-primary w-100"},r.createElement("td",null,r.createElement("input",f({},v("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(n=E.item)||void 0===n?void 0:n.name)&&r.createElement("p",null,"".concat(E.item.name.message))),r.createElement("td",null,r.createElement("textarea",f({},v("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(t=E.item)||void 0===t?void 0:t.description)&&r.createElement("p",null,"".concat(E.item.description.message))),r.createElement("td",null,r.createElement(a.A,{control:k,name:"item.tags"})),r.createElement("td",null,r.createElement("div",{className:"btn-group"},r.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:b||Object.keys(E).length>0}," Save "),r.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return u(-1)}},"Discard")))),r.createElement("tr",{className:"table-primary"},r.createElement("td",{colSpan:6},r.createElement("table",{id:"linkTable",className:"table table-info table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Container ID"),r.createElement("th",{scope:"col"},"Quantity"),r.createElement("th",{scope:"col"},"Remove"))),r.createElement("tbody",{id:"linkTableBody",className:"link"},B.map((function(e,n){var t;return r.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},r.createElement("td",null,c&&r.createElement(d,{key:"link-combobox-".concat(e.id),containerDTOs:c,control:k,errors:E,setError:w,clearErrors:x,index:n,link:e,setValue:N,setFocus:y,watchLinks:L})),r.createElement("td",null,r.createElement("input",f({},v("links.".concat(n,".quantity"),{valueAsNumber:!0}),{className:"form-control",min:-1/0,onBlur:function(){L[n].scannerId&&void 0===e.linkId&&function(e,n){var t=L,r=t.find((function(n){var t;return(null==n?void 0:n.linkId)&&(null===(t=null==n?void 0:n.scannerId)||void 0===t?void 0:t.trim())===e.trim()}));if(r){var l=t.findIndex((function(e){return e===r})),a=r.quantity,o=(a||1)+L[n].quantity;o<1?i((function(){return H(n,r.linkId?r.linkId:void 0)}),"If you do this, the item quantity in Container: ".concat(r.scannerId," will be less than one. Do you want to delete this link or cancel the operation?")):(N("links.".concat(l,".quantity"),o),T("Containter ID: ".concat(r.scannerId,", New Quantity: ").concat(o,", Old Quantity: ").concat(a)),j()),V(n)}}(L[n].scannerId,n)}}))),r.createElement("td",null,r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return H(n,e.linkId?e.linkId:void 0)}})),E.links&&E.links[n]&&r.createElement("p",null,null===(t=E.links[n])||void 0===t?void 0:t.message))})))))),r.createElement(m.A,{show:D,onClose:j},r.createElement(m.A.Header,null,r.createElement("strong",{className:"me-auto"},"Combined")),r.createElement(m.A.Body,null,S)))}}}]);