"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[931],{6931:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var l=n(6540),a=n(9785),r=n(1083),o=n(9668);const c=function(){var e=(0,l.useRef)(null),t=(0,l.useState)(void 0),n=t[0],a=t[1],r=["Test1","Test2","Test3"],o=function(){var t;null===(t=e.current)||void 0===t||t.focus()},c=function(e){a(e),o()};return l.createElement("div",{className:"input-group"},l.createElement("input",{type:"text",className:"form-control dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",ref:e,value:n}),l.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:o}),l.createElement("ul",{className:"dropdown-menu dropdown-menu-end w-100",style:{maxHeight:"200px",overflowY:"auto"}},l.createElement("li",null,l.createElement("a",{className:"dropdown-item",onClick:function(){return c(r[0])}},r[0])),l.createElement("li",null,l.createElement("a",{className:"dropdown-item",onClick:function(){return c(r[1])}},r[1])),l.createElement("li",null,l.createElement("a",{className:"dropdown-item",onClick:function(){return c(r[2])}},r[2]))))};var i=function(){return i=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},s=function(e,t,n,l){return new(n||(n=Promise))((function(a,r){function o(e){try{i(l.next(e))}catch(e){r(e)}}function c(e){try{i(l.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}i((l=l.apply(e,t||[])).next())}))},u=function(e,t){var n,l,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,l&&(a=2&c[0]?l.return:c[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,c[1])).done)return a;switch(l=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,l=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],l=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};const d=function(e){var t,n,d=e.itemDTO,m=e.handleDelete,f=e.cancelEdit,p=(0,a.xW)(),v=p.register,b=p.formState,E=b.errors,h=b.isSubmitting,k=p.control,g=p.setFocus,y=p.reset,w=p.trigger,I=p.setError,N=(0,a.jz)({control:k,name:"links"}),x=N.fields,C=N.append,T=N.remove,O=(0,a.FH)({control:k,name:"links"});return(0,l.useEffect)((function(){var e,t,n;(null===(e=null==O?void 0:O[O.length-1])||void 0===e?void 0:e.scannerId)&&(C({scannerId:"",quantity:1}),setTimeout((function(){w("links"),g("links.".concat(O.length-1,".scannerId"))}),0)),(null==O?void 0:O.length)>1&&!(null===(t=null==O?void 0:O[O.length-2])||void 0===t?void 0:t.scannerId)&&!(null===(n=null==O?void 0:O[O.length-1])||void 0===n?void 0:n.scannerId)&&T(O.length-1)}),[O]),(0,l.useEffect)((function(){y(d),C({scannerId:"",quantity:1}),w("links")}),[d,y]),l.createElement(l.Fragment,null,l.createElement("tr",{key:"item-edit-".concat(null==d?void 0:d.item.id),className:"table-primary"},l.createElement("td",null,l.createElement("input",i({},v("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(t=E.item)||void 0===t?void 0:t.name)&&l.createElement("p",null,"".concat(E.item.name.message))),l.createElement("td",null,l.createElement("textarea",i({},v("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(n=E.item)||void 0===n?void 0:n.description)&&l.createElement("p",null,"".concat(E.item.description.message))),l.createElement("td",null,l.createElement(o.A,{control:k,name:"item.tags"})),l.createElement("td",null,l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:h||Object.keys(E).length>0}," Save "),l.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return f(-1)}},"Discard")))),l.createElement("tr",{className:"table-primary"},l.createElement("td",{colSpan:5},l.createElement("table",{id:"linkTable",className:"table table-info table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{scope:"col"},"Container ID"),l.createElement("th",{scope:"col"},"Quantity"),l.createElement("th",{scope:"col"},"Remove"))),l.createElement("tbody",{id:"linkTableBody",className:"link"},x.map((function(e,t){var n,a,o;return l.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},l.createElement("td",null,l.createElement("input",i({},v("links.".concat(t,".scannerId")),{id:"linkId-".concat(t),className:"form-control",defaultValue:e.scannerId,disabled:void 0!==e.linkId,onBlur:function(e){return s(void 0,void 0,void 0,(function(){var n;return u(this,(function(l){switch(l.label){case 0:return(n=e.target.value)?[4,r.A.get("/api/container/check?scannerId=".concat(n))]:[3,2];case 1:202===l.sent().status&&I("links.".concat(t,".scannerId"),{message:"Container ID does not exist"}),l.label=2;case 2:return[2]}}))}))}})),(null===(a=null===(n=E.links)||void 0===n?void 0:n[t])||void 0===a?void 0:a.scannerId)&&l.createElement("li",{className:"list-group-item text-danger"},"".concat(E.links[t].scannerId.message))),l.createElement("td",null,l.createElement("input",i({},v("links.".concat(t,".quantity"),{valueAsNumber:!0}),{className:"form-control",defaultValue:e.quantity}))),l.createElement("td",null,l.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return function(e,t){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return void 0===t?(O.length>1&&T(e),[2]):[4,m(e,t)];case 1:return n.sent()&&T(e),[2]}}))}))}(t,e.linkId?e.linkId:void 0)}})),E.links&&E.links[t]&&l.createElement("p",null,null===(o=E.links[t])||void 0===o?void 0:o.message))})))))),l.createElement(c,null))}}}]);