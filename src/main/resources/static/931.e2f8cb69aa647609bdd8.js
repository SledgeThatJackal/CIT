"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[931],{6931:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var l=n(6540),r=n(9785),a=n(9668),o=function(){return o=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};const c=function(e){var t=e.containerDTOs,n=e.register,r=e.setError,a=e.index,c=e.link,i=(0,l.useRef)(null),s=(0,l.useState)(void 0),u=s[0],d=s[1],m=function(){var e;null===(e=i.current)||void 0===e||e.focus()};return l.createElement("div",{className:"input-group"},l.createElement("input",o({},n("links.".concat(a,".scannerId")),{id:"linkId-".concat(a),className:"form-control dropdown-toggle",defaultValue:c.scannerId,disabled:void 0!==c.linkId,"data-bs-toggle":"dropdown","aria-expanded":"false",ref:i,value:u,onBlur:function(e){var n=e.target.value.trim();n&&!(null==t?void 0:t.find((function(e){return e.scannerId===n})))&&r("links.".concat(a,".scannerId"),{message:"Container ID does not exist"})}})),l.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:void 0!==c.linkId,onClick:m}),l.createElement("ul",{className:"dropdown-menu dropdown-menu-end w-100",style:{maxHeight:"200px",overflowY:"auto"}},t&&t.map((function(e){return l.createElement(l.Fragment,null,l.createElement("li",null,l.createElement("a",{className:"dropdown-item",onClick:function(){return t=e.scannerId,d(t),void m();var t}},e.scannerId+" ("+e.name+")")))}))))};var i=function(){return i=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};const s=function(e){var t,n,o=e.itemDTO,s=e.containerDTOs,u=e.handleDelete,d=e.cancelEdit,m=(0,r.xW)(),f=m.register,p=m.formState,v=p.errors,b=p.isSubmitting,g=m.control,E=m.setFocus,y=m.reset,k=m.trigger,h=m.setError;console.log("Register: ".concat(JSON.stringify(f)));var I=(0,r.jz)({control:g,name:"links"}),w=I.fields,N=I.append,x=I.remove,O=(0,r.FH)({control:g,name:"links"});return(0,l.useEffect)((function(){var e,t,n;(null===(e=null==O?void 0:O[O.length-1])||void 0===e?void 0:e.scannerId)&&(N({scannerId:"",quantity:1}),setTimeout((function(){k("links"),E("links.".concat(O.length-1,".scannerId"))}),0)),(null==O?void 0:O.length)>1&&!(null===(t=null==O?void 0:O[O.length-2])||void 0===t?void 0:t.scannerId)&&!(null===(n=null==O?void 0:O[O.length-1])||void 0===n?void 0:n.scannerId)&&x(O.length-1)}),[O]),(0,l.useEffect)((function(){y(o),N({scannerId:"",quantity:1}),k("links")}),[o,y]),l.createElement(l.Fragment,null,l.createElement("tr",{key:"item-edit-".concat(null==o?void 0:o.item.id),className:"table-primary"},l.createElement("td",null,l.createElement("input",i({},f("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(t=v.item)||void 0===t?void 0:t.name)&&l.createElement("p",null,"".concat(v.item.name.message))),l.createElement("td",null,l.createElement("textarea",i({},f("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(n=v.item)||void 0===n?void 0:n.description)&&l.createElement("p",null,"".concat(v.item.description.message))),l.createElement("td",null,l.createElement(a.A,{control:g,name:"item.tags"})),l.createElement("td",null,l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:b||Object.keys(v).length>0}," Save "),l.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return d(-1)}},"Discard")))),l.createElement("tr",{className:"table-primary"},l.createElement("td",{colSpan:5},l.createElement("table",{id:"linkTable",className:"table table-info table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{scope:"col"},"Container ID"),l.createElement("th",{scope:"col"},"Quantity"),l.createElement("th",{scope:"col"},"Remove"))),l.createElement("tbody",{id:"linkTableBody",className:"link"},w.map((function(e,t){var n,r,a;return l.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},l.createElement("td",null,s&&l.createElement(c,{key:"link-combobox-".concat(e.id),containerDTOs:s,register:f,setError:h,index:t,link:e}),(null===(r=null===(n=v.links)||void 0===n?void 0:n[t])||void 0===r?void 0:r.scannerId)&&l.createElement("li",{className:"list-group-item text-danger"},"".concat(v.links[t].scannerId.message))),l.createElement("td",null,l.createElement("input",i({},f("links.".concat(t,".quantity"),{valueAsNumber:!0}),{className:"form-control",defaultValue:e.quantity}))),l.createElement("td",null,l.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return function(e,t){return n=void 0,l=void 0,a=function(){return function(e,t){var n,l,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,l&&(r=2&c[0]?l.return:c[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,c[1])).done)return r;switch(l=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,l=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],l=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(n){switch(n.label){case 0:return void 0===t?(O.length>1&&x(e),[2]):[4,u(e,t)];case 1:return n.sent()&&x(e),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{i(a.next(e))}catch(e){t(e)}}function c(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,c)}i((a=a.apply(n,l||[])).next())}));var n,l,r,a}(t,e.linkId?e.linkId:void 0)}})),v.links&&v.links[t]&&l.createElement("p",null,null===(a=v.links[t])||void 0===a?void 0:a.message))})))))))}}}]);