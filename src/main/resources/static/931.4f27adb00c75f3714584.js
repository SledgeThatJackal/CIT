"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[931],{6931:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var l=t(6540),r=t(9785),a=t(9668),o=function(){return o=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},o.apply(this,arguments)};const i=function(e){var n,t,r,a=e.containerDTOs,i=e.watchLinks,c=e.register,s=e.setError,u=e.index,d=e.errors,m=e.link,f=e.setValue,p=e.setFocus;return l.createElement(l.Fragment,null,l.createElement("div",{className:"input-group"},l.createElement("input",o({},c("links.".concat(u,".scannerId")),{id:"linkId-".concat(u),className:"form-control dropdown-toggle",value:(null===(n=i[u])||void 0===n?void 0:n.scannerId)||"",disabled:void 0!==m.linkId,"data-bs-toggle":"dropdown","aria-expanded":"false",onBlur:function(e){var n=e.target.value.trim();n&&!(null==a?void 0:a.find((function(e){return e.scannerId===n})))&&s("links.".concat(u,".scannerId"),{message:"Container ID does not exist"})}})),l.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:void 0!==m.linkId,onClick:function(){p("links.".concat(u,".scannerId"))}}),l.createElement("ul",{className:"dropdown-menu dropdown-menu-end w-100",style:{maxHeight:"200px",overflowY:"auto"}},a&&a.map((function(e){return l.createElement(l.Fragment,null,l.createElement("li",null,l.createElement("a",{className:"dropdown-item",onClick:function(){return n=e.scannerId,void f("links.".concat(u,".scannerId"),n);var n}},e.scannerId+" ("+e.name+")")))})))),(null===(r=null===(t=d.links)||void 0===t?void 0:t[u])||void 0===r?void 0:r.scannerId)&&l.createElement("li",{className:"list-group-item text-danger"},"".concat(d.links[u].scannerId.message)))};var c=function(){return c=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},c.apply(this,arguments)};const s=function(e){var n,t,o=e.itemDTO,s=e.containerDTOs,u=e.setupDelete,d=e.handleDelete,m=e.cancelEdit,f=(0,r.xW)(),p=f.register,v=f.formState,b=v.errors,k=v.isSubmitting,h=f.control,y=f.setFocus,E=f.reset,g=f.trigger,I=f.setError,w=f.setValue,x=(0,r.jz)({control:h,name:"links"}),N=x.fields,O=x.append,D=x.remove,C=(0,r.FH)({control:h,name:"links"});(0,l.useEffect)((function(){var e,n,t;(null===(e=null==C?void 0:C[C.length-1])||void 0===e?void 0:e.scannerId)&&(O({scannerId:"",quantity:1}),setTimeout((function(){g("links"),y("links.".concat(C.length-1,".scannerId"))}),0)),(null==C?void 0:C.length)>1&&!(null===(n=null==C?void 0:C[C.length-2])||void 0===n?void 0:n.scannerId)&&!(null===(t=null==C?void 0:C[C.length-1])||void 0===t?void 0:t.scannerId)&&D(C.length-1)}),[C]),(0,l.useEffect)((function(){E(o),O({scannerId:"",quantity:1}),g("links")}),[o,E]);var T=function(e,n){return t=void 0,l=void 0,a=function(){return function(e,n){var t,l,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(a=0)),a;)try{if(t=1,l&&(r=2&i[0]?l.return:i[0]?l.throw||((r=l.return)&&r.call(l),0):l.next)&&!(r=r.call(l,i[1])).done)return r;switch(l=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,l=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],l=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:return void 0===n?(C.length>1&&D(e),[2]):[4,d(e,n)];case 1:return t.sent()&&D(e),[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function o(e){try{c(a.next(e))}catch(e){n(e)}}function i(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}c((a=a.apply(t,l||[])).next())}));var t,l,r,a};return l.createElement(l.Fragment,null,l.createElement("tr",{key:"item-edit-".concat(null==o?void 0:o.item.id),className:"table-primary w-100"},l.createElement("td",null,l.createElement("input",c({},p("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(n=b.item)||void 0===n?void 0:n.name)&&l.createElement("p",null,"".concat(b.item.name.message))),l.createElement("td",null,l.createElement("textarea",c({},p("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(t=b.item)||void 0===t?void 0:t.description)&&l.createElement("p",null,"".concat(b.item.description.message))),l.createElement("td",null,l.createElement(a.A,{control:h,name:"item.tags"})),l.createElement("td",null,l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:k||Object.keys(b).length>0}," Save "),l.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return m(-1)}},"Discard")))),l.createElement("tr",{className:"table-primary"},l.createElement("td",{colSpan:6},l.createElement("table",{id:"linkTable",className:"table table-info table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{scope:"col"},"Container ID"),l.createElement("th",{scope:"col"},"Quantity"),l.createElement("th",{scope:"col"},"Remove"))),l.createElement("tbody",{id:"linkTableBody",className:"link"},N.map((function(e,n){var t,r;return l.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},l.createElement("td",null,s&&l.createElement(i,{key:"link-combobox-".concat(e.id),containerDTOs:s,watchLinks:C,register:p,setError:I,index:n,errors:b,link:e,setValue:w,setFocus:y})),l.createElement("td",null,l.createElement("input",c({},p("links.".concat(n,".quantity"),{valueAsNumber:!0}),{className:"form-control",value:(null===(t=C[n])||void 0===t?void 0:t.quantity)||1,min:-1/0,onBlur:function(){C[n].scannerId&&void 0===e.linkId&&function(e,n){var t=C,l=t.find((function(n){var t;return(null==n?void 0:n.linkId)&&(null===(t=null==n?void 0:n.scannerId)||void 0===t?void 0:t.trim())===e.trim()}));if(l){var r=t.findIndex((function(e){return e===l})),a=l.quantity,o=(a||1)+C[n].quantity;o<1?u((function(){return T(n,l.linkId?l.linkId:void 0)}),"If you do this, the item quantity in Container: ".concat(l.scannerId," will be less than one. Do you want to delete this link or cancel the operation?")):(w("links.".concat(r,".quantity"),o),console.log(a)),D(n)}}(C[n].scannerId,n)}}))),l.createElement("td",null,l.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return T(n,e.linkId?e.linkId:void 0)}})),b.links&&b.links[n]&&l.createElement("p",null,null===(r=b.links[n])||void 0===r?void 0:r.message))})))))))}}}]);