"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[664],{664:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(6540),l=n(9785),a=n(893),o=n(1083),c=n(5914),i=n(9668),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},s.apply(this,arguments)},u=function(e,t,n,r){return new(n||(n=Promise))((function(l,a){function o(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}i((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,l,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(l=2&c[0]?r.return:c[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,c[1])).done)return l;switch(r=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((l=(l=a.trys).length>0&&l[l.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){a.label=c[1];break}if(6===c[0]&&a.label<l[1]){a.label=l[1],l=c;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(c);break}l[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};function d(e){var t,n,d=this,f=e.itemDTO,p=e.reference,b=(0,l.mN)({defaultValues:f||{item:{},links:[{quantity:1}]},resolver:(0,a.u)(c.nE)}),v=b.register,h=b.handleSubmit,y=b.formState,E=y.errors,k=y.isSubmitting,g=b.control,I=b.reset,N=(0,l.jz)({control:g,name:"links"}),w=N.fields,x=N.append,A=N.remove,S=(0,l.FH)({control:g,name:"links"});return(0,r.useEffect)((function(){var e,t,n;(null===(e=null==S?void 0:S[S.length-1])||void 0===e?void 0:e.scannerId)&&(x({scannerId:"",quantity:1}),setTimeout((function(){var e;null===(e=document.getElementById("linkId-".concat(S.length-1)))||void 0===e||e.focus()}),0)),(null==S?void 0:S.length)>1&&!(null===(t=null==S?void 0:S[S.length-2])||void 0===t?void 0:t.scannerId)&&!(null===(n=null==S?void 0:S[S.length-1])||void 0===n?void 0:n.scannerId)&&A(S.length-1)}),[S]),(0,r.useEffect)((function(){f&&I(f)}),[f]),r.createElement("div",{className:"d-flex justify-content-center align-items-center"},r.createElement("form",{className:"w-75 p-3",onSubmit:h((function(e){return u(d,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return f?[4,o.A.patch("/api/item/edit",e)]:[3,2];case 1:return t.sent(),I(),[3,4];case 2:return[4,o.A.post("/api/item/create",e)];case 3:t.sent(),I(),t.label=4;case 4:return[2]}}))}))}),(function(e){console.error("Validation Errors: ",e)}))},r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"nameInput",className:"form-label"},"Name"),r.createElement("input",s({},v("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(t=E.item)||void 0===t?void 0:t.name)&&r.createElement("p",null,"".concat(E.item.name.message))),r.createElement("div",{className:"mb-3"},r.createElement("label",{htmlFor:"descriptionTextArea",className:"form-label"},"Description"),r.createElement("textarea",s({},v("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(n=E.item)||void 0===n?void 0:n.description)&&r.createElement("p",null,"".concat(E.item.description.message))),r.createElement(i.A,{control:g,name:"item.tags"}),r.createElement("table",{id:"linkTable",className:"table table-secondary table-hover table-striped"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{scope:"col"},"Scanner ID"),r.createElement("th",{scope:"col"},"Quantity"),r.createElement("th",{scope:"col"},"Remove"))),r.createElement("tbody",{id:"linkTableBody",className:"link"},w.map((function(e,t){var n;return r.createElement("tr",{key:e.id,"data-key":e.id},r.createElement("td",null,r.createElement("input",s({},v("links.".concat(t,".scannerId")),{id:"linkId-".concat(t),className:"form-control",defaultValue:e.scannerId}))),r.createElement("td",null,r.createElement("input",s({},v("links.".concat(t,".quantity"),{valueAsNumber:!0}),{className:"form-control",defaultValue:e.quantity}))),r.createElement("td",null,r.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return function(e,t){return u(d,void 0,void 0,(function(){var n;return m(this,(function(r){switch(r.label){case 0:if(void 0===t)return A(e),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o.A.delete("/api/link?id=".concat(t))];case 2:return r.sent(),A(e),[3,4];case 3:return n=r.sent(),console.error("Error deleting link: ",n),[3,4];case 4:return[2]}}))}))}(t,e.linkId?e.linkId:void 0)}})),E.links&&E.links[t]&&r.createElement("p",null,null===(n=E.links[t])||void 0===n?void 0:n.message))})))),r.createElement("button",{type:"submit",className:"btn btn-primary",disabled:k,ref:p,style:{display:p?"none":""}}," Create ")))}}}]);