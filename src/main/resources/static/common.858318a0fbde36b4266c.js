"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[76],{3552:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(6540);const r=function(e){var t=e.onDelete;return a.createElement("div",{className:"modal fade",id:"confirmationModal",tabIndex:-1,"aria-labelledby":"confirmationModalLabel","aria-hidden":"true"},a.createElement("div",{className:"modal-dialog"},a.createElement("div",{className:"modal-content"},a.createElement("div",{className:"modal-header"},a.createElement("h1",{className:"modal-title fs-5",id:"confirmationModalLabel"},"Are you sure you want to delete this?"),a.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),a.createElement("div",{className:"modal-footer"},a.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel"),a.createElement("button",{type:"button",className:"btn btn-danger",onClick:t,"data-bs-dismiss":"modal"},"Delete")))))}},5076:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6540),r=n(3905);const o=function(e){var t=e.currentPage,n=e.totalPages,o=e.onPageChange,l=(0,r.c)(t,n,3,2);return a.createElement("div",null,a.createElement("ul",{className:"pagination"},a.createElement("li",{className:"page-item"},a.createElement("button",{className:"page-link ".concat(0===t?"disabled":""),onClick:function(){return o(t-1)}},"Previous")),l.map((function(e,n){return a.createElement("li",{className:"page-item"},a.createElement("button",{key:"page-".concat(n),onClick:"..."===e?void 0:function(){return o(n)},className:"page-link ".concat(t===n?"active":"")},e))})),a.createElement("li",{className:"page-item"},a.createElement("button",{className:"page-link ".concat(t===n-1?"disabled":""),onClick:function(){return o(t+1)}},"Next"))))}},1118:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(6540),r=n(9785),o=n(893),l=n(1083),c=n(4476),i=c.z.object({id:c.z.number(),quantity:c.z.number().optional()}),s=c.z.object({id:c.z.number(),tag:c.z.string({message:"A tag is required"}),color:c.z.string()}),u=c.z.object({id:c.z.number().optional(),name:c.z.string({message:"The Item name is required"}),description:c.z.string().optional(),containerItems:c.z.array(i).optional(),tags:c.z.array(s).optional()}),m=c.z.object({scannerId:c.z.string().optional(),quantity:c.z.number().positive({message:"Quantity must be positive"}).optional(),linkId:c.z.number().optional().nullable()}).optional(),d=c.z.object({item:u,links:c.z.array(m)});const p=function(e){var t=e.control,n=e.name,o=e.onDelete,l=(0,r.as)({control:t,name:n}),c=l.field,i=(l.fieldState,c.value.color.replace("#","")),s=(16711422&parseInt(i,16))>>1,u="#".concat(s.toString(16).padStart(6,"0"));return a.createElement("div",{className:"d-inline-flex badge rounded-pill align-items-center",style:{backgroundColor:c.value.color,border:"3px solid ".concat(u),marginRight:3}},a.createElement("span",{style:{color:u,paddingRight:10,whiteSpace:"nowrap"}},c.value.tag),a.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:o}))};var f=n(8917),b=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{i(a.next(e))}catch(e){o(e)}}function c(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,c)}i((a=a.apply(e,t||[])).next())}))},v=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(l=0)),l;)try{if(n=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,a=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){l.label=c[1];break}if(6===c[0]&&l.label<r[1]){l.label=r[1],r=c;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(c);break}r[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(e){c=[6,e],a=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};const g=function(e){var t=e.control,n=e.name,o=(0,a.useState)("#FF0000"),c=o[0],i=o[1],s=(0,a.useState)(""),u=s[0],m=s[1],d=(0,a.useState)(""),g=d[0],h=d[1],y=(0,a.useState)([]),E=y[0],k=y[1],N=(0,r.jz)({control:t,name:n,keyName:"key"}),w=N.fields,I=N.append,x=N.remove;(0,a.useEffect)((function(){b(void 0,void 0,void 0,(function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,l.A.get("/api/tags")];case 1:return e=n.sent().data,k(e),[3,3];case 2:return t=n.sent(),console.log("Request failed: ",t),[3,3];case 3:return[2]}}))}))}),[w]);var C=function(e){return b(void 0,void 0,void 0,(function(){var t,n;return v(this,(function(a){switch(a.label){case 0:return console.log("Add Tag"),e?(t=e,[3,4]):[3,1];case 1:return a.trys.push([1,3,,4]),console.log("Try"),0===u.length?(h("The tag must have a value"),[2]):[4,l.A.post("/api/tags/create",{id:void 0,tag:u,color:c})];case 2:return t=a.sent().data,console.log("newTag"),[3,4];case 3:return n=a.sent(),console.error(n),[2];case 4:return I(t),m(""),h(""),[2]}}))}))};return a.createElement("div",null,a.createElement("div",{className:"mb-3"},a.createElement("label",{htmlFor:"tagInput",className:"form-label"},"Tags"),a.createElement("div",{className:"input-group"},a.createElement("input",{onChange:function(e){return m(e.target.value)},type:"text",value:u,id:"tagInput",className:"form-control w-75 dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-reference":"parent"}),a.createElement("div",{className:"dropdown-menu","aria-labeled":"tagInput"},E.length>0&&E.filter((function(e){var t=u.toLowerCase(),n=e.tag.toLowerCase();return!(t.length>0&&!n.startsWith(t)||w.some((function(e){return e.tag.toLowerCase()===n})))})).map((function(e,t){return a.createElement("button",{key:"db-tags-".concat(t),type:"button",className:"drowndown-item",onClick:function(){return C(e)},style:{border:0,backgroundColor:"white"}},a.createElement(f.A,{tag:e}))}))),a.createElement("input",{type:"color",className:"form-control form-control-color",id:"colorInput",value:c,onChange:function(e){return i(e.target.value)}}),a.createElement("button",{onClick:function(){return C()},type:"button",className:"btn btn-warning"},"Add")),a.createElement("div",{className:"form-text text-info"},g)),w.map((function(e,n){return a.createElement(p,{key:"tag-".concat(e.key),control:t,name:"item.tags.".concat(n),onDelete:function(){return function(e){return b(void 0,void 0,void 0,(function(){return v(this,(function(t){try{x(e)}catch(e){console.error(e)}return[2]}))}))}(n)}})})))};var h=function(){return h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},h.apply(this,arguments)},y=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{i(a.next(e))}catch(e){o(e)}}function c(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,c)}i((a=a.apply(e,t||[])).next())}))},E=function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(l=0)),l;)try{if(n=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,a=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){l.label=c[1];break}if(6===c[0]&&l.label<r[1]){l.label=r[1],r=c;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(c);break}r[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(e){c=[6,e],a=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};function k(e){var t,n,c=this,i=e.itemCreationDTO,s=e.reference,u=(0,r.mN)({defaultValues:i||{item:{},links:[{quantity:1}]},resolver:(0,o.u)(d)}),m=u.register,p=u.handleSubmit,f=u.formState,b=f.errors,v=f.isSubmitting,k=u.control,N=u.reset,w=(0,r.jz)({control:k,name:"links"}),I=w.fields,x=w.append,C=w.remove,z=(0,r.FH)({control:k,name:"links"});return(0,a.useEffect)((function(){var e,t,n;(null===(e=null==z?void 0:z[z.length-1])||void 0===e?void 0:e.scannerId)&&(x({scannerId:"",quantity:1}),setTimeout((function(){var e;null===(e=document.getElementById("linkId-".concat(z.length-1)))||void 0===e||e.focus()}),0)),(null==z?void 0:z.length)>1&&!(null===(t=null==z?void 0:z[z.length-2])||void 0===t?void 0:t.scannerId)&&!(null===(n=null==z?void 0:z[z.length-1])||void 0===n?void 0:n.scannerId)&&C(z.length-1)}),[z]),(0,a.useEffect)((function(){i&&N(i)}),[i]),a.createElement("div",{className:"d-flex justify-content-center align-items-center"},a.createElement("form",{className:"w-75 p-3",onSubmit:p((function(e){return y(c,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return i?[4,l.A.patch("/api/item/edit",e)]:[3,2];case 1:return t.sent(),N(),[3,4];case 2:return[4,l.A.post("/api/item/create",e)];case 3:t.sent(),N(),t.label=4;case 4:return[2]}}))}))}),(function(e){console.error("Validation Errors: ",e)}))},a.createElement("div",{className:"mb-3"},a.createElement("label",{htmlFor:"nameInput",className:"form-label"},"Name"),a.createElement("input",h({},m("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(t=b.item)||void 0===t?void 0:t.name)&&a.createElement("p",null,"".concat(b.item.name.message))),a.createElement("div",{className:"mb-3"},a.createElement("label",{htmlFor:"descriptionTextArea",className:"form-label"},"Description"),a.createElement("textarea",h({},m("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(n=b.item)||void 0===n?void 0:n.description)&&a.createElement("p",null,"".concat(b.item.description.message))),a.createElement(g,{control:k,name:"item.tags"}),a.createElement("table",{id:"linkTable",className:"table table-secondary table-hover table-striped"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{scope:"col"},"Scanner ID"),a.createElement("th",{scope:"col"},"Quantity"),a.createElement("th",{scope:"col"},"Remove"))),a.createElement("tbody",{id:"linkTableBody",className:"link"},I.map((function(e,t){var n;return a.createElement("tr",{key:e.id,"data-key":e.id},a.createElement("td",null,a.createElement("input",h({},m("links.".concat(t,".scannerId")),{id:"linkId-".concat(t),className:"form-control",defaultValue:e.scannerId}))),a.createElement("td",null,a.createElement("input",h({},m("links.".concat(t,".quantity"),{valueAsNumber:!0}),{className:"form-control",defaultValue:e.quantity}))),a.createElement("td",null,a.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return function(e,t){return y(c,void 0,void 0,(function(){var n;return E(this,(function(a){switch(a.label){case 0:if(void 0===t)return C(e),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,l.A.delete("/api/link?id=".concat(t))];case 2:return a.sent(),C(e),[3,4];case 3:return n=a.sent(),console.error("Error deleting link: ",n),[3,4];case 4:return[2]}}))}))}(t,e.linkId?e.linkId:void 0)}})),b.links&&b.links[t]&&a.createElement("p",null,null===(n=b.links[t])||void 0===n?void 0:n.message))})))),a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:v,ref:s,style:{display:s?"none":""}}," Create ")))}},8917:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(6540);const r=function(e){var t=e.tag,n=t.color.replace("#",""),r=(16711422&parseInt(n,16))>>1,o="#".concat(r.toString(16).padStart(6,"0"));return a.createElement("div",{className:"d-inline-flex badge rounded-pill align-items-center",style:{backgroundColor:t.color,border:"3px solid ".concat(o),marginRight:3}},a.createElement("span",{style:{color:o,whiteSpace:"nowrap"}},t.tag))}}}]);