"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[806],{7806:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var l=n(6540),a=n(9785),r=n(1083),c=n(9668),o=function(){return o=Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},i=function(e,t,n,l){return new(n||(n=Promise))((function(a,r){function c(e){try{i(l.next(e))}catch(e){r(e)}}function o(e){try{i(l.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,o)}i((l=l.apply(e,t||[])).next())}))},s=function(e,t){var n,l,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=o(0),c.throw=o(1),c.return=o(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function o(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(r=0)),r;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,l=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};const u=function(e){var t,n,u=e.itemDTO,d=e.handleDelete,m=e.cancelEdit,f=(0,a.xW)(),p=f.register,b=f.formState,v=b.errors,h=b.isSubmitting,E=f.control,k=f.setFocus,y=f.reset,g=f.trigger,I=f.setError,w=(0,a.jz)({control:E,name:"links"}),N=w.fields,x=w.append,C=w.remove,D=(0,a.FH)({control:E,name:"links"});return(0,l.useEffect)((function(){var e,t,n;(null===(e=null==D?void 0:D[D.length-1])||void 0===e?void 0:e.scannerId)&&(x({scannerId:"",quantity:1}),setTimeout((function(){g("links"),k("links.".concat(D.length-1,".scannerId"))}),0)),(null==D?void 0:D.length)>1&&!(null===(t=null==D?void 0:D[D.length-2])||void 0===t?void 0:t.scannerId)&&!(null===(n=null==D?void 0:D[D.length-1])||void 0===n?void 0:n.scannerId)&&C(D.length-1)}),[D]),(0,l.useEffect)((function(){y(u),x({scannerId:"",quantity:1}),g("links")}),[u,y]),l.createElement(l.Fragment,null,l.createElement("tr",{key:"item-edit-".concat(null==u?void 0:u.item.id),className:"table-primary"},l.createElement("td",null,l.createElement("input",o({},p("item.name"),{type:"text",id:"nameInput",className:"form-control",placeholder:"Item Name",autoFocus:!0})),(null===(t=v.item)||void 0===t?void 0:t.name)&&l.createElement("p",null,"".concat(v.item.name.message))),l.createElement("td",null,l.createElement("textarea",o({},p("item.description"),{id:"descriptionTextArea",className:"form-control",placeholder:"Item Description"})),(null===(n=v.item)||void 0===n?void 0:n.description)&&l.createElement("p",null,"".concat(v.item.description.message))),l.createElement("td",null,l.createElement(c.A,{control:E,name:"item.tags"})),l.createElement("td",null,l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"submit",className:"btn btn-info btn-sm",disabled:h}," Save "),l.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return m(-1)}},"Discard")))),l.createElement("tr",{className:"table-primary"},l.createElement("td",{colSpan:5},l.createElement("table",{id:"linkTable",className:"table table-info table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{scope:"col"},"Container ID"),l.createElement("th",{scope:"col"},"Quantity"),l.createElement("th",{scope:"col"},"Remove"))),l.createElement("tbody",{id:"linkTableBody",className:"link"},N.map((function(e,t){var n,a,c;return l.createElement("tr",{key:"link-".concat(e.id),"data-key":"link-".concat(e.id)},l.createElement("td",null,l.createElement("input",o({},p("links.".concat(t,".scannerId")),{id:"linkId-".concat(t),className:"form-control",defaultValue:e.scannerId,disabled:void 0!==e.linkId,onBlur:function(e){return i(void 0,void 0,void 0,(function(){var n;return s(this,(function(l){switch(l.label){case 0:return(n=e.target.value)?[4,r.A.get("/api/container/check?scannerId=".concat(n))]:[3,2];case 1:202===l.sent().status&&I("links.".concat(t,".scannerId"),{message:"Container ID does not exist"}),l.label=2;case 2:return[2]}}))}))}})),(null===(a=null===(n=v.links)||void 0===n?void 0:n[t])||void 0===a?void 0:a.scannerId)&&l.createElement("li",{className:"list-group-item text-danger"},"".concat(v.links[t].scannerId.message))),l.createElement("td",null,l.createElement("input",o({},p("links.".concat(t,".quantity"),{valueAsNumber:!0}),{className:"form-control",defaultValue:e.quantity}))),l.createElement("td",null,l.createElement("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return function(e,t){return i(void 0,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return void 0===t?(D.length>1&&C(e),[2]):[4,d(e,t)];case 1:return n.sent()&&C(e),[2]}}))}))}(t,e.linkId?e.linkId:void 0)}})),v.links&&v.links[t]&&l.createElement("p",null,null===(c=v.links[t])||void 0===c?void 0:c.message))})))))))}}}]);